<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Call</title>
<style>
body {
  font-family: Arial;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: #f0f0f0;
}
.call-container {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
.call-container img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin-bottom: 10px;
}
.call-container h2 {
  margin: 10px 0;
}
.hangup-btn {
  background-color: #e74c3c;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
}
.video-placeholder {
  width: 300px;
  height: 200px;
  background-color: #000;
  margin: 10px auto;
  border-radius: 8px;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
</style>
</head>
<body>

<div class="call-container">
  <img id="friendProfile" src="default-profile.png" alt="Profile">
  <h2 id="friendName">Calling...</h2>
  <div class="video-placeholder">Video Stream</div>
  <p>Video Call</p>
  <button class="hangup-btn" onclick="hangUp()">Hang Up</button>
</div>

<script>
// Get friend name from URL
const params = new URLSearchParams(window.location.search);
const friendName = params.get('friend') || "Friend";

// Display name
document.getElementById('friendName').innerText = friendName;

// Optionally, load friend's profile from localStorage
const friends = JSON.parse(localStorage.getItem('friends')||'[]');
const friend = friends.find(f => f.name === friendName);
if(friend && friend.profile){
  document.getElementById('friendProfile').src = friend.profile;
}

// Hang up function
function hangUp(){
  alert("Video call ended with " + friendName);
  window.location.href = "calls.html"; // go back to calls page
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calls</title>
<style>
body{font-family:Arial;margin:0;padding:20px;background:#f5f5f5;}
h2{margin-bottom:10px;}
.add-friend{margin-bottom:15px;}
.add-friend input{padding:5px 10px;margin-right:5px;border-radius:5px;border:1px solid #ccc;}
.add-friend button{padding:5px 10px;border:none;border-radius:5px;background:#2196F3;color:#fff;cursor:pointer;}
.friend{display:flex;align-items:center;background:white;padding:10px;margin:10px 0;border-radius:8px;}
.friend img{width:50px;height:50px;border-radius:50%;margin-right:15px;}
.friend-info{flex:1;}
.friend-buttons button{margin:0 5px;padding:6px 10px;border:none;border-radius:5px;cursor:pointer;}
.audio{background:#25d366;color:white;}
.video{background:#34b7f1;color:white;}
.status{font-size:14px;margin-top:5px;}
.accepted{color:green;}
.declined{color:red;}
.missed{color:orange;}
</style>
</head>
<body>
<h2>Friends Call Logs</h2>

<div id="friendsList"></div>

<script>
// Load friends from localStorage or default
let friends = JSON.parse(localStorage.getItem("friends")||JSON.stringify([
  {name:"Alice", img:"https://via.placeholder.com/50"},
  {name:"Bob", img:"https://via.placeholder.com/50"},
  {name:"Charlie", img:"https://via.placeholder.com/50"}
]));

function renderFriends(){
  const container=document.getElementById("friendsList");
  container.innerHTML="";
  const callStatus=JSON.parse(localStorage.getItem("callStatus")||"{}");

  friends.forEach(f=>{
    const div=document.createElement("div");
    div.className="friend";
    div.innerHTML=`
      <img src="${f.img}">
      <div class="friend-info">
        <strong>${f.name}</strong>
        <div class="status ${callStatus[f.name]?.class||""}">
          ${callStatus[f.name]?.text||"No recent call"}
        </div>
      </div>
      <div class="friend-buttons">
        <button class="audio">Audio</button>
        <button class="video">Video</button>
      </div>`;
    const audioBtn=div.querySelector(".audio");
    const videoBtn=div.querySelector(".video");
    audioBtn.onclick=()=>{window.location.href=`audio-call.html?friend=${encodeURIComponent(f.name)}&img=${encodeURIComponent(f.img)}`};
    videoBtn.onclick=()=>{window.location.href=`video-call.html?friend=${encodeURIComponent(f.name)}&img=${encodeURIComponent(f.img)}`};
    container.appendChild(div);
  });
}

renderFriends();
</script>
</body>
</html>

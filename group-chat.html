<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhatsApp Group Info</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
body { margin:0;font-family:'Segoe UI',Arial,sans-serif;background:#fff;color:#000;height:100vh;display:flex;flex-direction:column; }
#chatPage,#groupInfoPage{display:flex;flex-direction:column;flex:1;}
.header{display:flex;align-items:center;justify-content:space-between;background:#075E54;color:white;padding:10px;}
.header img{width:50px;height:50px;border-radius:50%;cursor:pointer;object-fit:cover;}
.header-info{flex:1;display:flex;flex-direction:column;margin-left:10px;overflow:hidden;}
.header-info h2{margin:0;font-size:16px;cursor:pointer;}
.header-info #members{font-size:12px;color:#d0f0e3;}
#chatBox{flex:1;overflow-y:auto;padding:10px;margin-bottom:100px;}
.msg{max-width:70%;padding:10px 14px;margin:5px 0;border-radius:18px;background:#f1f1f1;align-self:flex-start;position:relative;word-break:break-word;}
.msg.self{background:#dcf8c6;align-self:flex-end;}
.msg .meta{font-size:10px;color:#999;text-align:right;}
#inputArea{display:flex;align-items:center;position:fixed;bottom:10px;left:10px;width:calc(100%-20px);z-index:100;}
.input-box{display:flex;flex:1;background:#f1f1f1;border-radius:25px;padding:6px 10px;gap:6px;}
.input-box input{flex:1;border:none;outline:none;font-size:14px;background:transparent;}
.input-buttons button{background:transparent;border:none;font-size:20px;cursor:pointer;color:#128C7E;}
#micBtn{width:40px;height:40px;border-radius:50%;background:#25D366;color:white;border:none;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:6px;}
#attachmentMenu{display:none;position:fixed;bottom:60px;left:10px;right:10px;background:#fff;padding:10px;border-radius:10px;z-index:101;}
#attachmentMenu .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;}
#attachmentMenu button{padding:10px;border:none;border-radius:8px;background:#128C7E;color:white;cursor:pointer;font-size:16px;}
#emojiPicker{display:none;position:absolute;bottom:60px;right:10px;background:#fff;border-radius:10px;padding:5px;max-width:300px;max-height:150px;overflow-y:auto;display:flex;flex-wrap:wrap;gap:5px;}
.groupHeader{display:flex;flex-direction:column;align-items:center;padding:15px;background:#fff;color:#000;margin-bottom:10px;border-radius:10px;position:relative;}
.groupHeader img{width:80px;height:80px;border-radius:50%;cursor:pointer;margin-bottom:10px;object-fit:cover;}
.groupHeader h2{margin:0;font-size:18px;font-weight:500;cursor:text;}
.backArrow{position:absolute;left:10px;top:20px;font-size:20px;cursor:pointer;color:#000;}
.actionButtons{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:10px;width:100%;}
.actionButtons button{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px 0;background:#fff;border:1px solid #eee;border-radius:8px;cursor:pointer;}
.actionButtons i{font-size:20px;margin-bottom:5px;}
.container{background:#fff;padding:10px;margin:10px;border-radius:10px;}
.infoItem{margin:5px 0;font-size:14px;}
.settingsContainer{display:flex;flex-direction:column;gap:8px;padding:10px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;background:#fff;border-radius:8px;}
.settingsContainer button{width:100%;padding:12px 15px;border:none;background:#fff;display:flex;align-items:center;justify-content:space-between;gap:10px;color:#000;font-size:16px;cursor:pointer;border-radius:6px;transition:background 0.2s;}
.settingsContainer button:hover{background:#f1f1f1;}
.settingsContainer i{color:black;font-size:18px;}
.settingsContainer input[type="checkbox"]{transform:scale(1.2);cursor:pointer;}
#groupMembersList{display:flex;flex-direction:column;gap:8px;padding:10px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;}
.memberBox{padding:5px 10px;background:#eee;border-radius:8px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;}
.membersHeader{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
#memberCount{font-weight:500;font-size:16px;}
#addMemberBtn{width:30px;height:30px;border-radius:50%;background:#128C7E;color:white;font-size:20px;border:none;cursor:pointer;}
#groupLinks{display:flex;flex-direction:column;gap:8px;padding:10px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;}
#groupLinks button{width:100%;padding:10px;border:none;border-radius:5px;background:#fff;color:#000;cursor:pointer;text-align:left;}
.actionBox{display:flex;flex-direction:column;gap:8px;padding:10px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;}
.actionBox button{width:100%;padding:12px 15px;border:none;background:#fff;display:flex;align-items:center;gap:30px;color:red;font-size:16px;cursor:pointer;}
.actionBox i{color:red;font-size:18px;}
</style>
</head>
<body>

<!-- CHAT PAGE -->
<div id="chatPage">
  <div class="header">
    <img id="groupPhoto" src="profile.png">
    <div class="header-info">
      <h2 id="groupName">My Group</h2>
      <div id="members"></div>
    </div>
    <div class="header-actions">
      <button id="callBtn"><i class="fa-solid fa-phone"></i></button>
      <button id="menuBtn"><i class="fa-solid fa-ellipsis-vertical"></i></button>
    </div>
  </div>

  <div id="chatBox"></div>

  <div id="inputArea">
    <div class="input-box">
      <input id="msgInput" placeholder="Type a message...">
      <div class="input-buttons">
        <button id="emojiBtn"><i class="fa-solid fa-face-smile"></i></button>
        <button id="plusBtn"><i class="fa-solid fa-paperclip"></i></button>
      </div>
    </div>
    <button id="micBtn"><i class="fa-solid fa-microphone"></i></button>
  </div>
</div>

<!-- GROUP INFO PAGE -->
<div id="groupInfoPage" style="display:none;">
  <div class="groupHeader">
    <i class="fa-solid fa-arrow-left backArrow" onclick="backToChat()"></i>
    <img id="infoGroupPhoto" src="profile.png">
    <h2 id="infoGroupName" contenteditable="true">My Group</h2>
    <div class="actionButtons">
      <button><i class="fa-solid fa-video"></i><span>Video Call</span></button>
      <button><i class="fa-solid fa-phone"></i><span>Audio Call</span></button>
      <button><i class="fa-solid fa-magnifying-glass"></i><span>Search</span></button>
    </div>
  </div>

  <div class="settingsContainer">
    <button><i class="fa-solid fa-lock"></i> End-to-end Encryption</button>
    <button><i class="fa-solid fa-network-wired"></i> Mesh Network Form</button>
    <button><i class="fa-solid fa-paint-roller"></i> Chat Color & Wallpaper</button>
    <button><i class="fa-solid fa-shield"></i> Advanced Chat Privacy <input type="checkbox"></button>
  </div>

  <div class="container">
    <div class="membersHeader">
      <span id="memberCount">0 Members</span>
      <button id="addMemberBtn">+</button>
    </div>
    <div id="groupMembersList"></div>
  </div>

  <div class="container" id="groupLinks">
    <button id="showGroupLink">Group Link</button>
    <button id="showBlockedUsers">Blocked Users</button>
    <button id="showRequestInvite">Request / Invite</button>
  </div>

  <div class="container actionBox">
    <button><i class="fa-solid fa-sign-out"></i> Leave Group</button>
    <button><i class="fa-solid fa-ban"></i> Block Group</button>
    <button><i class="fa-solid fa-flag"></i> Report Group</button>
    <button><i class="fa-solid fa-trash"></i> Delete Group</button>
  </div>

  <input type="file" id="groupPhotoFile" accept="image/*" style="display:none;">
</div>

<script>
// ===== STATE =====
let currentUser = "John Doe"; // real logged-in user
let isAdmin = true;           // flag to show admin controls
let allFriends = ["Alice","Bob","Charlie"];
let currentGroupMembers = [currentUser,"Alice","Bob"];
let blockedMembers = JSON.parse(localStorage.getItem("blockedMembers")||"[]");
let messages = [];

// ===== CHAT =====
const chatBox=document.getElementById("chatBox");
const msgInput=document.getElementById("msgInput");

function uid(){ return Date.now().toString(36)+'-'+Math.random().toString(36).slice(2,8); }

msgInput.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    const txt=msgInput.value.trim();
    if(!txt) return;
    messages.push({id:uid(), text:txt, self:true, user:currentUser, time:new Date().toLocaleTimeString()});
    msgInput.value="";
    renderMessages();
  }
});

function renderMessages(){
  chatBox.innerHTML="";
  messages.forEach(m=>{
    const div=document.createElement("div");
    div.className="msg"+(m.user===currentUser?" self":"");
    div.innerHTML=`<div class="content"><b>${m.user}:</b> ${m.text}</div><div class="meta">${m.time}</div>`;
    chatBox.appendChild(div);
  });
}

// ===== GROUP MEMBERS =====
function renderGroupMembers(){
  const membersDiv=document.getElementById("groupMembersList");
  membersDiv.innerHTML="";
  const activeMembers=currentGroupMembers.filter(m=>!blockedMembers.includes(m));

  if(activeMembers.length===0){
    const div=document.createElement("div");
    div.textContent="No active members";
    div.style.fontStyle="italic";
    div.style.color="#555";
    membersDiv.appendChild(div);
  } else {
    activeMembers.forEach(name=>{
      const div=document.createElement("div");
      div.className="memberBox";
      div.textContent=name;
      if(isAdmin && name!==currentUser){
        const btn=document.createElement("button");
        btn.textContent="Block";
        btn.style.marginLeft="10px";
        btn.onclick=()=>blockMember(name);
        div.appendChild(btn);
      }
      membersDiv.appendChild(div);
    });
  }

  document.getElementById("memberCount").textContent=`${activeMembers.length} Member${activeMembers.length!==1?"s":""}`;
}

// ===== BLOCK / UNBLOCK =====
function blockMember(name){
  if(!blockedMembers.includes(name)) blockedMembers.push(name);
  localStorage.setItem("blockedMembers", JSON.stringify(blockedMembers));
  renderGroupMembers();
  renderBlockedMembers();
}

function unblockMember(name){
  blockedMembers = blockedMembers.filter(m=>m!==name);
  localStorage.setItem("blockedMembers", JSON.stringify(blockedMembers));
  renderGroupMembers();
  renderBlockedMembers();
}

function renderBlockedMembers(){
  let list=document.getElementById("blockedMembersList");
  if(!list){
    list=document.createElement("div");
    list.id="blockedMembersList";
    document.querySelector("#groupInfoPage").appendChild(list);
  }
  list.innerHTML="<h3>Blocked Members</h3>";
  if(blockedMembers.length===0){
    list.innerHTML+="<p style='color:#555;font-style:italic'>No blocked members</p>";
  } else {
    blockedMembers.forEach(name=>{
      const div=document.createElement("div");
      div.className="memberBox";
      div.textContent=name;
      if(isAdmin){
        const btn=document.createElement("button");
        btn.textContent="Unblock";
        btn.style.marginLeft="10px";
        btn.onclick=()=>unblockMember(name);
        div.appendChild(btn);
      }
      list.appendChild(div);
    });
  }
}

// ===== ADD MEMBER =====
document.getElementById("addMemberBtn").onclick = ()=>{
  const friendsToAdd = allFriends.filter(f=>!currentGroupMembers.includes(f));
  if(friendsToAdd.length===0){ alert("No friends to add yet."); return; }
  const friend = prompt("Add member:\n"+friendsToAdd.join("\n"));
  if(friend && friendsToAdd.includes(friend)){
    currentGroupMembers.push(friend);
    renderGroupMembers();
  }
};

// ===== GROUP INFO PAGE =====
document.getElementById("groupName").onclick = ()=>openGroupInfo();
document.getElementById("openGroupInfo")?.addEventListener("click", openGroupInfo);

function openGroupInfo(){
  document.getElementById("chatPage").style.display="none";
  document.getElementById("groupInfoPage").style.display="block";
  renderGroupMembers();
}

function backToChat(){
  document.getElementById("groupInfoPage").style.display="none";
  document.getElementById("chatPage").style.display="flex";
}

// ===== GROUP PHOTO =====
document.getElementById("infoGroupPhoto").onclick=()=>{ document.getElementById("groupPhotoFile").click(); };
document.getElementById("groupPhotoFile").addEventListener("change",e=>{
  const file=e.target.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=()=>{
      const url=reader.result;
      document.getElementById("infoGroupPhoto").src=url;
      document.getElementById("groupPhoto").src=url;
    };
    reader.readAsDataURL(file);
  }
});

// ===== INITIAL RENDER =====
renderMessages();
renderGroupMembers();
renderBlockedMembers();
</script>
</body>
</html>

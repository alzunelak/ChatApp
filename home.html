<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChatApp Home</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background:#f5f5f5;
  }
  .header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px 15px;
    background:#fff;
    box-shadow:0 1px 3px rgba(0,0,0,0.1);
  }
  .profile {
    display:flex;
    align-items:center;
  }
  .profile img {
    width:50px;
    height:50px;
    border-radius:50%;
    margin-right:10px;
  }
  .profile-name {
    font-weight:bold;
    font-size:16px;
  }
  .three-dots {
    font-size:24px;
    cursor:pointer;
  }

  .no-msg {
    text-align:center;
    margin:50px 0;
    color:#888;
    font-size:18px;
  }

  /* Tabs */
  .tabs {
    display:flex;
    justify-content:space-around;
    padding:10px 0;
    background:#fff;
    position:fixed;
    bottom:0;
    width:100%;
    border-top:1px solid #ccc;
  }
  .tabs div {
    font-weight:bold;
    cursor:pointer;
  }

  /* Floating + button */
  .add-button-container {
    position:fixed;
    bottom:60px; /* above tabs */
    right:20px;
    z-index:100;
  }
  #addBtn {
    width:60px;
    height:60px;
    border-radius:50%;
    font-size:32px;
    cursor:pointer;
    background-color:#4CAF50;
    color:white;
    border:none;
  }
  .popup-options {
    display:none;
    position:absolute;
    bottom:70px;
    right:0;
    background:#fff;
    border:1px solid #ddd;
    border-radius:8px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
    padding:10px;
    text-align:left;
  }
  .popup-options a {
    display:block;
    padding:8px 12px;
    color:#333;
    text-decoration:none;
  }
  .popup-options a:hover { background:#f0f0f0; }

</style>
</head>
<body>
  <!-- Header with dynamic profile pic and name -->
<div class="header">
  <div class="profile">
    <img id="profilePic" src="default-profile.png" alt="Profile">
    <div class="profile-name" id="profileName">User</div>
  </div>
  <div class="three-dots">&#8942;</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const profileName = document.getElementById('profileName');
  const profilePic = document.getElementById('profilePic');

  const savedName = localStorage.getItem('username') || 'User';
  const savedProfile = localStorage.getItem('profilePic') || 'default-profile.png';

  profileName.innerText = savedName;
  profilePic.src = savedProfile;
});
</script>

<!-- No messages -->
<div class="no-msg">
  No messages yet<br>
  Add a friend using the + button
</div>

<!-- Floating + button -->
<div class="add-button-container">
  <button id="addBtn">+</button>
  <div id="popupOptions" class="popup-options">
    <a href="Code.html">My Code</a>
    <a href="scan.html">Scan Code</a>
    <a href="search.html">Search Friend</a>
    <a href="video.html?friend=QR1234">Take Video</a>
    <a href="picture.html?friend=QR1234">Take Picture</a>
  </div>
</div>

<!-- Tabs -->
<div class="tabs">
  <div>Chat</div>
  <div>Group</div>
  <div>Call</div>
</div>

<script>
const addBtn = document.getElementById('addBtn');
const popupOptions = document.getElementById('popupOptions');

addBtn.addEventListener('click', () => {
  popupOptions.style.display = popupOptions.style.display === 'block' ? 'none' : 'block';
});

document.addEventListener('click', function(event) {
  if (!addBtn.contains(event.target) && !popupOptions.contains(event.target)) {
    popupOptions.style.display = 'none';
  }
});
</script>

</body>
</html>

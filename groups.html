<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Groups</title>
<style>
body { font-family: Arial,sans-serif; margin:0; padding:20px; background:#f5f5f5; }
.profile-section { display:flex; flex-direction:column; align-items:center; }
.profile-section img { width:80px; height:80px; border-radius:50%; margin-bottom:10px; }
.friend { padding:10px; background:#fff; margin:5px 0; border-radius:8px; cursor:pointer; box-shadow:0 1px 3px rgba(0,0,0,0.1); }
.selected { background:#c8e6c9; }
button#createGroup { margin-top:10px; padding:10px 20px; cursor:pointer; background:#4CAF50; color:white; border:none; border-radius:6px; }
</style>
</head>
<body>

<div class="profile-section">
  <img id="profilePhoto" src="default-profile.png">
  <h2 id="profileName">User</h2>
</div>

<h3>Select Friends to Add to Group</h3>
<div id="groupFriendsList"></div>
<button id="createGroup">Create Group</button>

<script>
const profileName = localStorage.getItem('username') || 'User';
const profilePic = localStorage.getItem('profilePic') || 'default-profile.png';
document.getElementById('profileName').textContent = profileName;
document.getElementById('profilePhoto').src = profilePic;

const friends = JSON.parse(localStorage.getItem('friends')||'[]');
const groupList = document.getElementById('groupFriendsList');
const selectedFriends = new Set();

if(friends.length === 0){
  groupList.innerHTML = '<p>No friends added yet</p>';
} else {
  friends.forEach(f=>{
    const div = document.createElement('div');
    div.className='friend';
    div.innerText = f;
    div.onclick = ()=>{
      if(selectedFriends.has(f)){
        selectedFriends.delete(f);
        div.classList.remove('selected');
      } else {
        selectedFriends.add(f);
        div.classList.add('selected');
      }
    };
    groupList.appendChild(div);
  });
}

document.getElementById('createGroup').addEventListener('click', ()=>{
  if(selectedFriends.size === 0){
    alert('Select at least one friend to create a group.');
  } else {
    alert('Group created with: ' + Array.from(selectedFriends).join(', '));
    selectedFriends.clear();
    document.querySelectorAll('.friend').forEach(div => div.classList.remove('selected'));
  }
});
</script>
</body>
</html>
